<!DOCTYPE html>
<html lang="en-US"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>upgrade – @skyland</title><link rel="dns-prefetch" href="//blog.nzh.me"><link rel="dns-prefetch" href="//s.w.org"><link rel="stylesheet" id="wp-block-library-css" href="https://blog.nzh.me/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all"><link rel="stylesheet" id="parchment-google-fonts-css" href="https://blog.nzh.me/wp-content/googlefonts/default.css?family=Vollkorn%3A400italic%2C700italic%2C400%2C700%7CMontserrat%3A400%2C700&ver=5.6.2" type="text/css" media="all"><link rel="stylesheet" id="parchment-style-css" href="https://blog.nzh.me/wp-content/themes/parchment/style.css" type="text/css" media="all"><style id="parchment-style-inline-css" type="text/css">
false
false
false
</style><script type="text/javascript" src="https://blog.nzh.me/wp-includes/js/jquery/jquery.min.js" id="jquery-core-js"></script><script type="text/javascript" src="https://blog.nzh.me/wp-includes/js/jquery/jquery-migrate.min.js" id="jquery-migrate-js"></script><style type="text/css">.car-collapse .car-yearmonth { cursor: s-resize; } </style><script type="text/javascript">
		/* <![CDATA[ */
			jQuery(document).ready(function() {
				jQuery('.car-collapse').find('.car-monthlisting').hide();
				jQuery('.car-collapse').find('.car-monthlisting:first').show();
				jQuery('.car-collapse').find('.car-yearmonth').click(function() {
					jQuery(this).next('ul').slideToggle('fast');
				});
				jQuery('.car-collapse').find('.car-toggler').click(function() {
					if ( 'Expand All' == jQuery(this).text() ) {
						jQuery(this).parent('.car-container').find('.car-monthlisting').show();
						jQuery(this).text('Collapse All');
					}
					else {
						jQuery(this).parent('.car-container').find('.car-monthlisting').hide();
						jQuery(this).text('Expand All');
					}
					return false;
				});
			});
		/* ]]> */
	</script><link rel="icon" href="https://blog.nzh.me/wp-content/uploads/2019/02/cropped-Girl-with-Balloon-2-32x32.jpg" sizes="32x32"><link rel="icon" href="https://blog.nzh.me/wp-content/uploads/2019/02/cropped-Girl-with-Balloon-2-192x192.jpg" sizes="192x192"><link rel="apple-touch-icon" href="https://blog.nzh.me/wp-content/uploads/2019/02/cropped-Girl-with-Balloon-2-180x180.jpg"><meta name="msapplication-TileImage" content="https://blog.nzh.me/wp-content/uploads/2019/02/cropped-Girl-with-Balloon-2-270x270.jpg"></head><body class="archive tag tag-upgrade tag-497 serif">
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<a href="#drawer" data-target-id="drawer" id="toggle-drawer" class="genericon genericon-menu toggle-button"><span class="label">Menu</span></a>

	<header id="masthead" class="site-header" role="banner"><div class="site-branding">
						<h1 class="site-title"><a href="https://blog.nzh.me/" rel="home">@skyland</a></h1>
			<h2 class="site-description">荣耀的背后刻着一道孤独</h2>
		</div>
	</header><div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main"><header class="page-header"><h1 class="page-title">Tag: <span>upgrade</span></h1>			</header><h4 class="hentry-day on-page-cover" data-date="2007-01-26"><span class="label">Friday, 26 January 2007</span><span class="border"></span></h4><span style="display: none;" class="article-marker" data-date="2007-01-26" data-month="January" data-year="0"></span>
<article id="post-623" class="post-623 post type-post status-publish format-standard hentry category-about-this-blog tag-upgrade tag-wordpress"><header class="entry-header"><h1 class="entry-title"><a href="https://blog.nzh.me/about-this-blog/what-happened-to-my-blog-in-the-past-12-hours.html" rel="bookmark">What happened to my blog in the past 12 hours.</a></h1>
				<div class="entry-meta">
					</div>
			</header><div class="entry-content">
		<p>之前已经看到N多WP User都升级以了2.1, 而且他们都说”升级步骤很简单”, “没发生什么错误”, 于是, 尽管他们都有提醒要注意备份, 一向就有点冲动的我还是没有得备份, 直接就开始更新.<br>
一切都弄好之后, 打开主页, 我K, 全是”?”号, 传说中的乱码, 把浏览器的查看字符编码改为简体中文GB2123, 一切正常. 看来是编码问题. 这个问题已经小小的打击了我一下了, 我再登录后台, “You do not have sufficient permissions to access this page.” 当时真是郁闷到极点. 嗯, 两个问题, 而且都是”大问题”, 得一个一个来解决. 先解决后台登录权限问题吧.<br><a href="http://www.google.com/search?q=You+do+not+have+sufficient+permissions+to+access+this+page&ie=utf-8&oe=utf-8&rls=org.mozilla:zh-CN:official&client=firefox">Google这个登录错误</a>, 前几个搜索项都指向官方Supports论坛, 过去看了看, 的确很多人遇到这个问题, 不过都是很久以前他们在从1.5升级到2.0时遇到的, 应该有雷同之处, 两篇帖子回贴的提出了好几种解决方法, 退出重新登录, 不行, 清空缓存重新登录, 不行, 运行其中一高手写的”force-upgrade.php”, 不行, 用PHPMYADMIN修改usermeta, 还是不行, 之后又乱七八糟地试了很多方法, 包括网上搜到的, 我自己想到的, 通通不行, 绝望了. 问Wordpress QQ群, 没人鸟我, 上论坛问, 没人鸟我. 人心冷漠啊… 我还是睡觉好了.<br>
睡在床上想来想去, 做梦都在想解决办法, 早上醒来, 睁着眼睛躺在床上想, 突然想到一个好办法, 事后证明, 我太天才了. ^ ^<br>
权限问题很可能是我当初从Z-Blog转到Wordpress导致的User冲突, Wp2.0.X没出现权限冲突, WP2.1就来了… 而User冲突的话, 我把现在的数据库涉及User和相关权限设置的三个表wp_usermeta, wp_users, wp_options清空, 再重新导入一份新的话, 应该可以解决. 马上行动, 用PHPMYADMIN备份除了这三个表之外的所有数据库, 然后清空所有数据库, 重新建一个Wordpress, 保存好这个新数据库的wp_usermeta, wp_users, wp_options, 然后整合进刚才备份的没有这三个表的数据库, 再把整合后的导入, 哇, 成功了… 成功进入后台!<br>
不过, 还是乱码.<br>
我之前也遇到过乱码问题, 但这次的不同, 也很奇怪, 我的SQL文件已经转换成UTF-8, 不管在本地用记事本看, 还是用PHPMYADMIN看, 都没问题, 唯独在Wordpress页面上是乱吗, 非常不解, 再次Google, 终于<a href="http://yanfeng.org/blog/585/">在这里</a>找到解决办法:</p>
<p>修改WP-INCLUDE下的wp-db.php –><br><code>$this->dbh = @mysql_connect($dbhost,$dbuser,$dbpassword);<br>
//在这行下面加上<br>
$this->query("SET NAMES 'utf8'");</code></p>
<p>这样做的原因我不懂, 但原文说的很清楚. 我也累了, 不过又学到很多东西…<br><strong>备份十分非常超级无敌NB重要!</strong></p>
	</div>

		
</article></main></div>



	</div>

	<div id="drawer">
		<div class="drawer-content sliding-content" data-direction="left">
			<div class="drawer-header">
				<a href="#" data-target-id="drawer" class="genericon genericon-close-alt toggle-button">
					<span class="label">Close Drawer</span>
				</a>
				<h2 class="site-name">@skyland</h2>
			</div>

			<div class="drawer-navigation">
				<div class="menu-main-container"><ul id="menu-main" class="menu"><li id="menu-item-1424" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1424"><a title="首页" href="https://blog.nzh.me/">Home</a></li>
<li id="menu-item-1423" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1423"><a title="Explore this blog" href="https://blog.nzh.me/archives">Archive</a></li>
<li id="menu-item-1422" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1422"><a title="The Premiership clubs crests" href="https://blog.nzh.me/premiership-club-crest">Crests</a></li>
<li id="menu-item-1421" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1421"><a title="Rivalries of Man Utd" href="https://blog.nzh.me/some-things-between-united-and-his-fierce-rivals">Rivalries</a></li>
<li id="menu-item-3072" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3072"><a href="https://blog.nzh.me/cong-xuan-vps-dao-jia-she-udp-zhuan-fa-xing-ss-dao-lu-you-she-zhi">VPS</a></li>
<li id="menu-item-2945" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2945"><a href="https://blog.nzh.me/contact">Contact</a></li>
</ul></div>			</div>
			
					</div>

		<div class="drawer-overlay toggle-button" data-target-id="drawer"></div>
	</div>	

	<footer id="colophon" class="site-footer" role="contentinfo"><div class="site-info">
			 Hosted  on  <a href="https://idc.wiki/lndex.php?productid=1433" rel="designer">WIKIHOST</a>

		</div>
	</footer></div>

<script type="text/javascript" src="https://blog.nzh.me/wp-content/themes/parchment/js/parchment.js" id="parchment-script-js"></script></body></html>
